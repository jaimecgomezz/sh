#!/usr/bin/env sh

#-----------------------------
# @jaimecgomezz
#
# Easily switch wallpapers
#
# Requires:
#   - slc (custom script)
#   - hsetroot
#------------------- protected
export PNAME="${PNAME:-$(ps --no-headers -o comm $PPID)}"
#------------------------ vars
THEME="${1:-dark}"
WALLPAPERS="${HOME}/pictures/walls"
SYMBOLIC="${HOME}/pictures/wallpaper"
#-----------------------------

USAGE="Usage: wal [THEME] [WALLPAPER]

Theme
  -             Enter themes interactive mode
  [THEME]       Any folder under the WALLPAPERS folder
  h, help       Print this help

Wallpaper
  -             Enter wallpapers interactive mode
  [WALLPAPER]   Any image under the WALLPAPERS/[Theme] folder"
print_usage() { echo "$USAGE"; }

set_wal() {
	rm "$SYMBOLIC"
	ln -s "$WALLPAPERS/$THEME/$1" "$SYMBOLIC"
	hsetroot -cover "$SYMBOLIC" >/dev/null
}

if wallpaper="$(find "$WALLPAPERS/$THEME"/* -maxdepth 1 -type f -printf '%f\n' | slc -select "$2")"; then
	set_wal "$wallpaper"
	wal "$THEME" "$wallpaper"
else
	exit 1
fi
